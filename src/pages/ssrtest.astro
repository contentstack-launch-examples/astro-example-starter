---
import Layout from '../layouts/Layout.astro';

Astro.response.headers.set("Cache-Control", "no-store, must-revalidate");
Astro.response.headers.set("Pragma", "no-cache");
Astro.response.headers.set("Expires", "0");

const currentTime = new Date().toLocaleString();
const randomNumber = Math.floor(Math.random() * 1000);

const userAgent = Astro.request.headers.get('user-agent') || 'Unknown';
const requestUrl = Astro.url.href;
const requestMethod = Astro.request.method;
---

<Layout>
  <section style="padding: 2rem; font-family: sans-serif;">
    <h1>Astro SSR Test Page</h1>
    <p>This page is rendered on the server for every request!</p>
    
    <div style="background: #f0f8ff; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
      <h2>Server-Side Data (Generated per request):</h2>
      <ul>
        <li><strong>Current server time:</strong> {currentTime}</li>
        <li><strong>Random number:</strong> {randomNumber}</li>
      </ul>
    </div>

    <p>
      <a href="/">â† Back to Home</a>
    </p>
  </section>
</Layout>
